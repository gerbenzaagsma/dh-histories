{{ define "main" }}
  {{/* Parse dates; fall back to old event_date if needed */}}
  {{ $start := or .Params.event_start .Params.event_date }}
  {{ $end   := .Params.event_end }}

  {{ $startT := cond $start ($start | time) nil }}
  {{ $endT   := cond $end   ($end   | time) nil }}

  {{/* Helpers for comparisons */}}
  {{ $sameDay   := and $startT $endT (eq ($startT | time.Format "2006-01-02") ($endT | time.Format "2006-01-02")) }}
  {{ $sameMonth := and $startT $endT (and (eq ($startT | time.Format "2006") ($endT | time.Format "2006")) (eq ($startT | time.Format "01") ($endT | time.Format "01"))) }}
  {{ $sameYear  := and $startT $endT (eq ($startT | time.Format "2006") ($endT | time.Format "2006")) }}

  <article>
    <h1>{{ .Title }}</h1>

    <p class="meta">
      {{ if and $startT $endT }}
        {{/* Range formatting */}}
        {{ if $sameDay }}
          ğŸ“… {{ $startT | time.Format "Mon, Jan 2, 2006" }}
        {{ else if $sameMonth }}
          ğŸ“… {{ $startT | time.Format "Jan 2" }}â€“{{ $endT | time.Format "2, 2006" }}
        {{ else if $sameYear }}
          ğŸ“… {{ $startT | time.Format "Jan 2" }} â€“ {{ $endT | time.Format "Jan 2, 2006" }}
        {{ else }}
          ğŸ“… {{ $startT | time.Format "Jan 2, 2006" }} â€“ {{ $endT | time.Format "Jan 2, 2006" }}
        {{ end }}
      {{ else if $startT }}
        ğŸ“… {{ $startT | time.Format "Mon, Jan 2, 2006" }}
      {{ else }}
        ğŸ“… {{ .Date | time.Format "Mon, Jan 2, 2006" }}
      {{ end }}

      {{ with .Params.location }} Â· ğŸ“ {{ . }}{{ end }}
    </p>

    <div class="post-content">
      {{ .Content }}
    </div>

   {{/* Pretty tag list that links to each tag page */}}
{{ $tags := .GetTerms "tags" }}
{{ with $tags }}
  <div class="post-tags">
    <span class="tags-title">Tags:</span>
    <ul class="tags">
      {{ range . }}
        <li><a class="tag" href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></li>
      {{ end }}
    </ul>
  </div>
{{ end }}
  </article>
{{ end }}